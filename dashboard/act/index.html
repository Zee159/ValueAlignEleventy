---
layout: layouts/dashboard.njk
title: Plan an Act | ValueAlign Dashboard
pageTitle: Plan a Value-Based Act
pageDescription: Create and plan a new value-aligned action
meta_description: Plan and create meaningful actions that align with your core values.
requires_auth: true
eleventyNavigation:
  key: Plan an Act
  parent: Dashboard
  order: 4
---

<div class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
  <!-- Act Page Header -->
  <div class="p-6 border-b border-gray-200 dark:border-gray-700">
    <div class="flex flex-col justify-between">
      <div>
        <h2 class="text-xl font-medium text-gray-900 dark:text-white">Plan a Value-Based Act</h2>
        <p class="text-sm text-gray-600 dark:text-gray-400">Create an act that aligns with your core values</p>
      </div>
    </div>
  </div>

  <!-- Act Content -->
  <div class="p-6">
    <div id="act-planner" class="act-planner-container">
      <!-- Act planner will be loaded here -->
      <div class="act-planner-loading text-center py-10">
        <p class="text-gray-600 dark:text-gray-400">Loading act planner...</p>
        <div class="flex justify-center items-center mt-4">
          <svg class="animate-spin h-8 w-8 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
        </div>
      </div>

      <!-- Default act planning form (shown if dynamic loading fails) -->
      <div id="act-fallback" class="hidden">
        <form id="act-form-fallback" class="space-y-6">
          <div>
            <label for="act-title" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Act Title</label>
            <input type="text" id="act-title" name="act-title" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500" placeholder="Give your act a meaningful title">
          </div>

          <div>
            <label for="act-value" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Related Value</label>
            <select id="act-value" name="act-value" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <option value="">Select a core value</option>
              <option value="honesty">Honesty</option>
              <option value="kindness">Kindness</option>
              <option value="growth">Growth</option>
              <option value="family">Family</option>
              <option value="health">Health</option>
              <option value="adventure">Adventure</option>
              <option value="contribution">Contribution</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div>
            <label for="act-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300">When will you do this?</label>
            <input type="date" id="act-date" name="act-date" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>

          <div>
            <label for="act-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description</label>
            <textarea id="act-description" name="act-description" rows="4" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500" placeholder="Describe what you'll do and how it connects to your value"></textarea>
          </div>

          <div>
            <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
              Create Act
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Act Confirmation Message -->
    <div id="act-confirmation" class="hidden mt-8 p-6 bg-green-50 dark:bg-green-900/30 rounded-lg">
      <h2 class="text-xl font-semibold text-green-800 dark:text-green-200 mb-3">Act Created!</h2>
      <p class="text-green-700 dark:text-green-300 mb-4">Your act has been created and added to your dashboard.</p>
      <div class="flex flex-wrap gap-4">
        <a href="/dashboard/acts/" class="inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
          View My Acts
        </a>
        <button id="create-another-act" class="inline-flex items-center px-4 py-2 border border-green-600 text-base font-medium rounded-md shadow-sm text-green-700 dark:text-green-300 bg-white dark:bg-gray-800 hover:bg-green-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
          Create Another Act
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Tips Section -->
<div class="mt-8 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg shadow-sm">
  <h3 class="text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2">Tips for Creating Value-Based Acts</h3>
  <ul class="list-disc pl-5 text-blue-700 dark:text-blue-300 space-y-2">
    <li>Connect your act to one or more of your core values</li>
    <li>Be specific about what you'll do and when</li>
    <li>Make it realistic and achievable</li>
    <li>Consider what might get in your way and plan for it</li>
    <li>Reflect on how this act aligns with your values after completion</li>
  </ul>
</div>

<!-- Status Message for Accessibility Announcements -->
<div id="act-status" class="sr-only" role="status" aria-live="polite"></div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    console.log('[ActPlannerController] Initializing Act Planner');
    
    // DOM elements
    const actPlannerContainer = document.getElementById('act-planner');
    const loadingElement = actPlannerContainer.querySelector('.act-planner-loading');
    const fallbackForm = document.getElementById('act-fallback');
    const confirmationMessage = document.getElementById('act-confirmation');
    const createAnotherButton = document.getElementById('create-another-act');
    const statusElement = document.getElementById('act-status');
    
    // Attempt to load the dynamic act planner module
    function loadActPlannerModule() {
      try {
        // First, try to load using a script tag (preferred approach based on memory)
        const script = document.createElement('script');
        script.src = '/js/act-planner.js?v=' + Date.now(); // Cache-busting parameter
        script.onload = function() {
          console.log('[ActPlannerController] Successfully loaded act-planner.js');
          statusElement.textContent = 'Act planner module loaded';
          
          // The script should handle initialization through global registration
          if (window.ActPlanner && typeof window.ActPlanner.initialize === 'function') {
            window.ActPlanner.initialize(actPlannerContainer);
          } else {
            console.error('[ActPlannerController] ActPlanner module not properly initialized');
            showFallbackForm();
          }
        };
        script.onerror = function(error) {
          console.error('[ActPlannerController] Failed to load act-planner.js:', error);
          showFallbackForm();
        };
        document.body.appendChild(script);
      } catch (error) {
        console.error('[ActPlannerController] Error in module loading:', error);
        showFallbackForm();
      }
    }
    
    // Show fallback form if dynamic loading fails
    function showFallbackForm() {
      loadingElement.classList.add('hidden');
      fallbackForm.classList.remove('hidden');
      statusElement.textContent = 'Using basic act planning form';
    }
    
    // Initialize the act planner interface
    loadActPlannerModule();
    
    // Handle fallback form submission
    const fallbackFormElement = document.getElementById('act-form-fallback');
    if (fallbackFormElement) {
      fallbackFormElement.addEventListener('submit', function(event) {
        event.preventDefault();
        
        // Basic validation
        const title = document.getElementById('act-title').value;
        const value = document.getElementById('act-value').value;
        const date = document.getElementById('act-date').value;
        const description = document.getElementById('act-description').value;
        
        if (!title || !value || !date || !description) {
          alert('Please complete all fields');
          return;
        }
        
        // Mock saving act
        console.log('[ActPlannerController] Saving act:', {
          title,
          value,
          date,
          description
        });
        
        // Show completion message
        actPlannerContainer.classList.add('hidden');
        confirmationMessage.classList.remove('hidden');
        statusElement.textContent = 'Act created successfully';
      });
    }
    
    // Handle creating another act
    if (createAnotherButton) {
      createAnotherButton.addEventListener('click', function() {
        confirmationMessage.classList.add('hidden');
        actPlannerContainer.classList.remove('hidden');
        
        // Reset form if using fallback
        if (!loadingElement.classList.contains('hidden')) {
          // Dynamic interface is handling this
        } else if (fallbackFormElement) {
          fallbackFormElement.reset();
        }
        
        statusElement.textContent = 'Starting a new act plan';
      });
    }
  });
</script>
