---
layout: portal
title: Dashboard | ValueAlign Portal
meta_description: Your ValueAlign dashboard showing your alignment journey progress.
requires_auth: true
permalink: /dashboard/
eleventyNavigation:
  key: Dashboard
  parent: Portal
  order: 1
---

<div class="mb-6" role="banner">
    <h1 id="portal-welcome-heading" class="text-3xl font-bold text-va-text dark:text-white font-montserrat">Your Dashboard</h1>
    <p class="text-lg text-gray-600 dark:text-gray-400">Overview of your alignment journey.</p>
</div>

<!-- Status announcement region for screen readers -->
<div id="dashboard-status" class="sr-only" aria-live="polite"></div>

<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6" role="region" aria-labelledby="dashboard-section-title">
    <h2 id="dashboard-section-title" class="sr-only">Dashboard Summary Sections</h2>
        
        <!-- Alignment Score Card -->
        <section class="bg-va-card-bg p-6 rounded-2xl shadow-lg card-hover-lift flex flex-col justify-between" role="region" aria-labelledby="alignment-score-title">
            <div>
                <h2 id="alignment-score-title" class="text-xl font-semibold text-va-primary mb-3 font-montserrat pb-3 border-b border-gray-200">Alignment Score</h2>
                <div class="flex items-center justify-center my-4" aria-live="polite">
                    <p id="alignment-score-value" class="text-5xl font-bold text-va-text" aria-label="Your alignment score">--</p>
                    <span id="alignment-score-trend" class="ml-2 text-2xl" aria-hidden="true"></span> 
                </div>
                <p class="text-sm text-gray-500 text-center">Your current value-action alignment.</p>
            </div>
            <div class="mt-auto pt-4 border-t border-gray-200">
                <a href="/alignment-details/" class="block text-center text-va-primary hover:text-va-accent font-semibold text-sm" aria-label="View your alignment trend details">View Trend &rarr;</a>
            </div>
        </section>

        <!-- Daily Reflection Card -->
        <section class="bg-va-card-bg p-6 rounded-2xl shadow-lg card-hover-lift flex flex-col justify-between" role="region" aria-labelledby="reflection-title">
            <div>
                <h2 id="reflection-title" class="text-xl font-semibold text-va-primary mb-3 font-montserrat pb-3 border-b border-gray-200">Today's Reflection</h2>
                <p id="daily-reflection-prompt" class="text-gray-700 text-sm mb-3 italic pt-3">How have your actions today aligned with your core values?</p>
            </div>
            <div class="mt-auto pt-4 border-t border-gray-200">
                <button id="go-to-reflect-button" class="w-full bg-va-primary text-white font-semibold py-2 px-4 rounded-lg shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-va-primary focus:ring-opacity-50 transition" aria-label="Begin your daily reflection exercise">
                    Start Reflection
                </button>
            </div>
        </section>

        <!-- Quick Actions Card -->
        <section class="bg-va-card-bg p-6 rounded-2xl shadow-lg card-hover-lift flex flex-col justify-between" role="region" aria-labelledby="quick-actions-title">
            <div>
                <h2 id="quick-actions-title" class="text-xl font-semibold text-va-primary mb-3 font-montserrat pb-3 border-b border-gray-200">Quick Actions</h2>
                <p class="text-sm text-gray-500 mb-4 pt-3">Try a micro-action to boost your alignment:</p>
                <div id="micro-actions-container" class="space-y-2" role="list" aria-label="Suggested micro-actions">
                    <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg shadow-sm" role="listitem">
                        <p class="text-sm text-va-text dark:text-gray-300">Take 5 minutes to meditate and reflect on your values.</p>
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg shadow-sm" role="listitem">
                        <p class="text-sm text-va-text dark:text-gray-300">Connect with a family member and express gratitude.</p>
                    </div>
                </div>
            </div>
            <div class="mt-auto pt-4 border-t border-gray-200">
                <a href="/act/" class="block text-center text-va-primary hover:text-va-accent font-semibold text-sm" aria-label="Browse the complete action library">Explore Action Library &rarr;</a>
            </div>
        </section>

        <!-- Progress Card -->
        <section class="bg-va-card-bg p-6 rounded-2xl shadow-lg card-hover-lift flex flex-col justify-between" role="region" aria-labelledby="progress-title">
            <div>
                <h2 id="progress-title" class="text-xl font-semibold text-va-primary mb-3 font-montserrat pb-3 border-b border-gray-200">Your Progress</h2>
                <div class="mb-3 pt-3">
                    <p class="text-sm text-gray-600">Current Streak: <span id="streak-value" class="font-bold text-va-text">7 days</span></p>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mt-1" role="progressbar" aria-labelledby="streak-progress-label" aria-valuenow="23" aria-valuemin="0" aria-valuemax="100">
                        <div id="streak-progress-bar" class="bg-va-accent h-2.5 rounded-full" style="width: 23%"></div>
                        <span id="streak-progress-label" class="sr-only">Current streak progress</span>
                    </div>
                </div>
                <div>
                    <p class="text-sm text-gray-600">Current Badge: <span id="badge-value" class="font-bold text-va-text">Value Explorer</span></p>
                </div>
            </div>
            <div class="mt-auto pt-4 border-t border-gray-200">
                <a href="/progress/" class="block text-center text-va-primary hover:text-va-accent font-semibold text-sm" aria-label="View all your achievements and badges">View All Achievements &rarr;</a>
            </div>
        </section>
    </div>

    <!-- Upgrade to Premium Card -->
    <section id="upgrade-premium-card" class="mt-8 bg-gradient-to-r from-va-primary to-teal-600 p-6 sm:p-8 rounded-2xl shadow-xl text-white" role="complementary" aria-labelledby="premium-title">
        <div class="flex flex-col md:flex-row items-center justify-between">
            <div class="mb-6 md:mb-0 md:mr-6">
                <h2 id="premium-title" class="text-2xl sm:text-3xl font-bold font-montserrat mb-2">Unlock Your Full Potential</h2>
                <p class="text-sm sm:text-base text-teal-100 mb-4">Go Premium to access exclusive AI-powered tools and deepen your alignment journey.</p>
                <ul class="space-y-2 text-sm sm:text-base" role="list" aria-label="Premium features list">
                    <li class="flex items-center" role="listitem">
                        <svg class="w-5 h-5 mr-2 text-va-accent" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        In-Depth AI Value Analysis
                    </li>
                    <li class="flex items-center" role="listitem">
                        <svg class="w-5 h-5 mr-2 text-va-accent" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        AI-Powered Journal Insights
                    </li>
                    <li class="flex items-center" role="listitem">
                        <svg class="w-5 h-5 mr-2 text-va-accent" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        Personalized AI Coaching
                    </li>
                </ul>
            </div>
            <a href="/features/#premium-ai" class="bg-yellow-400 text-gray-800 font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-150 ease-in-out transform hover:scale-105 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-yellow-300 focus:ring-opacity-50" aria-label="Learn more about premium AI features">
                Explore Premium Features
            </a>
        </div>
    </section>
</main>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    console.log('[Dashboard.njk] Checking auth with modern auth system');
    
    // Use a small timeout to ensure auth service is initialized
    setTimeout(() => {
      if (!window.authService || !window.authService.isAuthenticated()) {
        console.log('[Dashboard.njk] Not authenticated with modern auth system, redirecting to login');
        
        // Store current path for redirect after login
        localStorage.setItem('auth_redirect_after_login', '/dashboard/');
        
        // Redirect to login page
        window.location.href = '/login/';
        return;
      }
      
      const user = window.authService.getCurrentUser();
      console.log('[Dashboard.njk] User authenticated:', user);
      
      // Update welcome message with user name
      const welcomeHeading = document.getElementById('portal-welcome-heading');
      if (welcomeHeading && user) {
        const displayName = user.name || user.email.split('@')[0];
        welcomeHeading.textContent = `Welcome, ${displayName}!`;
        welcomeHeading.setAttribute('aria-label', `Welcome, ${displayName}!`);
      }
      
      // Handle reflect button
      const goToReflectButton = document.getElementById('go-to-reflect-button');
      if (goToReflectButton) {
        goToReflectButton.addEventListener('click', () => {
            window.location.href = '/reflect/';
        });
      }
      
      // Simulate showing/hiding premium card based on user status
      // In real implementation, this would be based on user tier from backend
      const upgradePremiumCard = document.getElementById('upgrade-premium-card');
      if (upgradePremiumCard) {
          // For demo, always show (can be changed to be conditional based on some property)
          // upgradePremiumCard.classList.remove('hidden');
      }
    }, 100); // Properly close the setTimeout function
  });
</script>
